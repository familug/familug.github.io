<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="hvn" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="kotlin, JVM, java, CLI, programming, frontpage, " />

<meta property="og:title" content="Compile Kotlin có cần JDK không? "/>
<meta property="og:url" content="./compile-kotlin-co-can-jdk-khong.html" />
<meta property="og:description" content="Hay &#34;Một mình chống lại cả internet và AI (ChatGPT, Gemini)&#34;. Internet thường hay sai, thậm chí nhiều khi sai nhưng nghe có vẻ đúng đúng, là nền tảng cho sự &#34;ảo tưởng&#34; của các AI chatbot bịa ra đủ thứ và nói rất hay. build kotlin &#34;Hello world&#34; có …" />
<meta property="og:site_name" content="FAMILUG.org Vietnam" />
<meta property="og:article:author" content="hvn" />
<meta property="og:article:published_time" content="2024-07-16T00:00:00+07:00" />
<meta name="twitter:title" content="Compile Kotlin có cần JDK không? ">
<meta name="twitter:description" content="Hay &#34;Một mình chống lại cả internet và AI (ChatGPT, Gemini)&#34;. Internet thường hay sai, thậm chí nhiều khi sai nhưng nghe có vẻ đúng đúng, là nền tảng cho sự &#34;ảo tưởng&#34; của các AI chatbot bịa ra đủ thứ và nói rất hay. build kotlin &#34;Hello world&#34; có …">

        <title>Compile Kotlin có cần JDK không?  · FAMILUG.org Vietnam
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>FAMILUG.org Vietnam</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       .
                                    >Home</a>
                                </li>
                                <li ><a href="./categories.html">Categories</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li ><a href="./archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./compile-kotlin-co-can-jdk-khong.html">
                Compile Kotlin có cần JDK không?
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p>Hay "Một mình chống lại cả internet và AI (ChatGPT, Gemini)".</p>
<p>Internet thường hay sai, thậm chí nhiều khi sai nhưng nghe có vẻ đúng đúng, là nền tảng cho sự "ảo tưởng" của các AI chatbot bịa ra đủ thứ và nói rất hay.</p>
<h2>build kotlin "Hello world" có cần JDK không?</h2>
<p>Với câu hỏi "I want to write kotlin hello world program and build with kotlinc, do I need to install JDK (not JRE)", lên mạng internet tìm câu trả lời:</p>
<p>Ta tìm được StackOverFlow đầy uy tín (và nổi tiếng vì nhiều câu trả lời sai)</p>
<ul>
<li>SO <a href="https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin">https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin</a></li>
<li>Sololearn (học 1 mình?) <a href="https://www.sololearn.com/en/Discuss/2073812/why-does-kotlin-need-a-jdk-when-it-has-its-own-compiler">https://www.sololearn.com/en/Discuss/2073812/why-does-kotlin-need-a-jdk-when-it-has-its-own-compiler</a></li>
<li>Kotlin discuss <a href="https://discuss.kotlinlang.org/t/does-the-kotlin-compiler-require-a-jdk/2496">https://discuss.kotlinlang.org/t/does-the-kotlin-compiler-require-a-jdk/2496</a></li>
</ul>
<p>Thử hỏi ChatGPT</p>
<p><img alt="chatgpt" src="./images/chatgpt.png"></p>
<p>Và AI của Google: Gemini</p>
<p><img alt="gemini" src="./images/gemini.png"></p>
<p>Mọi câu trả lời đều là "có". Nhưng... bài trước <a href="./hello-kotlin-2024.html">Hello Kotlin 2024</a> hoàn toàn không thấy nhắc tới JDK, vậy có cần không?</p>
<h3>JRE là gì</h3>
<div class="highlight"><pre><span></span><code>$ apt-cache search openjdk <span class="p">|</span> grep -i jdk-17
openjdk-17-doc - OpenJDK Development Kit <span class="o">(</span>JDK<span class="o">)</span> documentation
openjdk-17-jdk - OpenJDK Development Kit <span class="o">(</span>JDK<span class="o">)</span>
openjdk-17-jdk-headless - OpenJDK Development Kit <span class="o">(</span>JDK<span class="o">)</span> <span class="o">(</span>headless<span class="o">)</span>
openjdk-17-jre - OpenJDK Java runtime, using Hotspot JIT
openjdk-17-jre-headless - OpenJDK Java runtime, using Hotspot JIT <span class="o">(</span>headless<span class="o">)</span>
openjdk-17-jre-zero - Alternative JVM <span class="k">for</span> OpenJDK, using Zero
openjdk-17-source - OpenJDK Development Kit <span class="o">(</span>JDK<span class="o">)</span> <span class="nb">source</span> files
</code></pre></div>

<p>Java Runtime Environment (JRE) chứa máy ảo JVM, dùng để chạy các file .class, hay nói chung: để chạy các chương trình trên JVM. JRE tương ứng với chương trình câu lệnh <code>java</code>.</p>
<h3>JDK là gì</h3>
<p>Java Development Kit (JDK) chứa Java compiler và nhiều thành phần khác cần thiết để viết chương trình chạy trên JVM. JDK có chương trình câu lệnh <code>javac</code>, khi viết bất kì chương trình Java nào đều cần <code>javac</code> để compile thành <code>.class</code>.</p>
<h2>Kotlin compiler</h2>
<p>Kotlin sử dụng compiler để biến code Kotlin (file .kt) thành Java bytecode (file .class), rồi chạy code đó (interpret) trên máy ảo JVM.</p>
<p>Java và Kotlin là điển hình cho ngôn ngữ dùng cả "compiler" lẫn "interpreter".</p>
<p>Kotlin compiler <a href="https://kotlinlang.org/docs/command-line.html">https://kotlinlang.org/docs/command-line.html</a> được đóng gói thành một file JAR, và người dùng thường nhìn thấy câu lệnh "kotlinc" (thực chất là 1 script).</p>
<h3>Kotlinc</h3>
<p><code>kotlinc</code> là một script để gọi câu lệnh <code>java</code> với các option cần thiết:</p>
<div class="highlight"><pre><span></span><code>$ cat <span class="k">$(</span><span class="nb">command</span> -v kotlinc<span class="k">)</span>
<span class="c1">#!/usr/bin/env bash</span>
<span class="c1">#</span>
...
<span class="c1"># Copyright 2011-2015, JetBrains</span>
...
    <span class="nv">kotlin_app</span><span class="o">=(</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">KOTLIN_HOME</span><span class="si">}</span><span class="s2">/lib/kotlin-preloader.jar&quot;</span> <span class="s2">&quot;org.jetbrains.kotlin.preloading.Preloader&quot;</span> <span class="s2">&quot;-cp&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">KOTLIN_HOME</span><span class="si">}</span><span class="s2">/lib/kotlin-compiler.jar</span><span class="si">${</span><span class="nv">additional_classpath</span><span class="si">}</span><span class="s2">&quot;</span> <span class="nv">$KOTLIN_COMPILER</span><span class="o">)</span>
<span class="k">fi</span>

<span class="s2">&quot;</span><span class="si">${</span><span class="nv">JAVACMD</span><span class="p">:=java</span><span class="si">}</span><span class="s2">&quot;</span> <span class="nv">$JAVA_OPTS</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">java_args</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> -cp <span class="s2">&quot;</span><span class="si">${</span><span class="nv">kotlin_app</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">kotlin_args</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<p>Có thể thấy file <code>kotlin-compiler.jar</code> được dùng ở script trên. Khi chạy <code>kotlinc</code> chỉ thấy gọi lệnh <code>java</code>, không thấy dùng <code>javac</code> (Java compiler).</p>
<h3>Build chương trình Kotlin đơn giản dùng stdlib của Java</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># main.kt</span>
<span class="kn">import</span> <span class="nn">java.math.BigInteger</span>

<span class="n">fun</span> <span class="n">pe16</span><span class="p">():</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="n">val</span> <span class="n">p</span><span class="p">:</span> <span class="n">BigInteger</span> <span class="o">=</span> <span class="mf">2.</span><span class="n">toBigInteger</span><span class="p">()</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
            <span class="o">.</span><span class="n">chars</span><span class="p">()</span>
            <span class="o">.</span><span class="n">map</span><span class="p">({</span> <span class="n">it</span> <span class="o">-</span> <span class="s1">&#39;0&#39;</span><span class="o">.</span><span class="n">toInt</span><span class="p">()</span> <span class="p">})</span>
            <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;tong cac chu so cua 2**1000 la ${pe16()}&quot;</span><span class="o">.</span><span class="n">toUpperCase</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>

<p>Kết quả</p>
<div class="highlight"><pre><span></span><code>$ kotlinc main.kt
$ kotlin MainKt
TONG CAC CHU SO CUA <span class="m">2</span>**1000 LA <span class="m">1366</span>
</code></pre></div>

<p>Hoàn toàn không thấy sử dụng <code>javac</code> trong quá trình này. Trên máy thậm chí không có câu lệnh <code>javac</code> tức không cài JDK.</p>
<div class="highlight"><pre><span></span><code>$ javac
zsh: <span class="nb">command</span> not found: javac
$ dpkg -l <span class="p">|</span> grep
ii  openjdk-11-jre:amd64                             <span class="m">11</span>.0.23+9-1ubuntu1~22.04.1                        amd64        OpenJDK Java runtime, using Hotspot JIT
ii  openjdk-11-jre-headless:amd64                    <span class="m">11</span>.0.23+9-1ubuntu1~22.04.1                        amd64        OpenJDK Java runtime, using Hotspot JIT <span class="o">(</span>headless<span class="o">)</span>
</code></pre></div>

<h3>Kết luận</h3>
<p>Build chương trình kotlin không cần JDK.</p>
<p>Sau khi lên kotlinlang Slack để kiểm tra lại câu trả lời, một người dùng Kotlin lâu năm đã cùng sửa lại internet với câu trả lời StackOverFlow <a href="https://stackoverflow.com/a/78750618/807703">https://stackoverflow.com/a/78750618/807703</a>.</p>
<h2>Kết luận</h2>
<p>Thời buổi AI 4.0, nhớ giành thời gian tự suy nghĩ.</p>
<p>Hết.</p>
<p>HVN at <a href="http://pymi.vn">http://pymi.vn</a> and <a href="https://www.familug.org">https://www.familug.org</a>.</p>
<p><a href="https://www.familug.org/p/ung-ho.html">Ủng hộ tác giả 🍺</a></p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2024-07-16T00:00:00+07:00">Tue 16 July 2024</time>
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#frontpage-ref">frontpage</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#cli-ref">CLI
                    <span class="superscript">7</span>
</a></li>
                <li><a href="./tags.html#java-ref">java
                    <span class="superscript">4</span>
</a></li>
                <li><a href="./tags.html#jvm-ref">JVM
                    <span class="superscript">2</span>
</a></li>
                <li><a href="./tags.html#kotlin-ref">kotlin
                    <span class="superscript">2</span>
</a></li>
                <li><a href="./tags.html#programming-ref">programming
                    <span class="superscript">2</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>